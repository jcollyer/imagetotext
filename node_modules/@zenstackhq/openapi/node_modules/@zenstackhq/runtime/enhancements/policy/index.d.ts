import { type ModelMeta } from '../../cross';
import { AuthUser } from '../../types';
import { ErrorTransformer } from '../proxy';
import type { CommonEnhancementOptions, PolicyDef, ZodSchemas } from '../types';
/**
 * Context for evaluating access policies
 */
export type WithPolicyContext = {
    user?: AuthUser;
};
/**
 * Transaction isolation levels: https://www.prisma.io/docs/orm/prisma-client/queries/transactions#transaction-isolation-level
 */
export type TransactionIsolationLevel = 'ReadUncommitted' | 'ReadCommitted' | 'RepeatableRead' | 'Snapshot' | 'Serializable';
/**
 * Options for @see withPolicy
 */
export interface WithPolicyOptions extends CommonEnhancementOptions {
    /**
     * Policy definition
     */
    policy?: PolicyDef;
    /**
     * Model metadata
     */
    modelMeta?: ModelMeta;
    /**
     * Zod schemas for validation
     */
    zodSchemas?: ZodSchemas;
    /**
     * Whether to log Prisma query
     */
    logPrismaQuery?: boolean;
    /**
     * Hook for transforming errors before they are thrown to the caller.
     */
    errorTransformer?: ErrorTransformer;
    /**
     * The `maxWait` option passed to `prisma.$transaction()` call for transactions initiated by ZenStack.
     */
    transactionMaxWait?: number;
    /**
     * The `timeout` option passed to `prisma.$transaction()` call for transactions initiated by ZenStack.
     */
    transactionTimeout?: number;
    /**
     * The `isolationLevel` option passed to `prisma.$transaction()` call for transactions initiated by ZenStack.
     */
    transactionIsolationLevel?: TransactionIsolationLevel;
}
/**
 * Gets an enhanced Prisma client with access policy check.
 *
 * @param prisma The original Prisma client
 * @param context The policy evaluation context
 * @param policy The policy definition, will be loaded from default location if not provided
 * @param modelMeta The model metadata, will be loaded from default location if not provided
 *
 * @deprecated Use {@link enhance} instead
 */
export declare function withPolicy<DbClient extends object>(prisma: DbClient, context?: WithPolicyContext, options?: WithPolicyOptions): DbClient;
